
<%= form_with(model: @store) do |form| %>
<div class="d-flex justify-content-center">
  <div class="box-form">
  <form>
  <div class="form-group">
    <%= form.label :Nombre, class: 'h4' %>
    <%= form.text_field :name, class: 'form-control' %>
  </div>
  <div class="form-group">
    <%= form.label :Url, class: 'h4' %>
    <%= form.text_field :url, class: 'form-control' %>
  </div>

    <%= form.fields_for :addresses do |p| %>

  

    <div class="form-group">
    <%= form.label :direccion, class: 'h4' %>
    <%= p.text_field :name, placeholder:"Enter your address", onFocus:"initializeAutocomplete()", id:"locality", class:"form-control" %>
    </div>

    <div class="form-group">
    <%= form.label :latitude, class: 'h4' %>
    <%= p.text_field :latitude, id:"latitude", placeholder:"Latitude", value:"", class: 'form-control' %>
    </div>
    

   <div class="form-group">
    <%= form.label :longitude, class: 'h4' %>
    <%= p.text_field :longitude, id:"longitude", placeholder:"Longitude", value:"",  class: 'form-control' %>
   </div>
   <% end %>

  </form>

  <div class="actions">
    <%= form.submit %>
  </div>
<% end %>

</div>

</div>

		<div id ="map"> </div> 


<script src="<%= google_maps_api_autocomplete_url %>" async defer></script>

<script type="text/javascript">
  function initializeAutocomplete(){
    var input = document.getElementById('locality');
    // var options = {
    //   types: ['(regions)'],
    //   componentRestrictions: {country: "IN"}
    // };
    var options = {}

    var autocomplete = new google.maps.places.Autocomplete(input, options);

    google.maps.event.addListener(autocomplete, 'place_changed', function() {
      var place = autocomplete.getPlace();
      var lat = place.geometry.location.lat();
      var lng = place.geometry.location.lng();
      var placeId = place.place_id;
      // to set city name, using the locality param
      document.getElementById("latitude").value = lat;
      document.getElementById("longitude").value = lng;
      document.getElementById("location_id").value = placeId;
    });


    
  }
</script>

